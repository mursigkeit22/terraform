**Для каталога, в котором уже есть сеть и подсеть. Создаёт ВМ.**

#### Шаги:

1. Получить токен с помощью командной строки Yandex Cloud (действует ок. 12 часов)
```
yc iam create-token
```

2. Подготовить файл с публичным ssh-ключом. 

3. В файле terraform.tfvars:
- заполнить токен из п.1
- заполнить id облака и каталога (их можно посмотреть либо в UI яндекс-облака, либо через yc config list)
- заполнить subnet_id (subnet_id можно посмотреть в UI яндекс-облака), поменять зону, если необходимо
- указать в ssh_public_key_default_path и ssh_public_key_path путь до файла с публичным ключом
- заменить id образа, имя vm и т.д., если необходимо
- заменить hashed_passwd (можно оставить поле пустым). Создать hash пароля можно командой `mkpasswd --method=SHA-512 --rounds=4096` 
- если уже есть зарегистрированный внешний ip для будущей ВМ, заполнить ip_address. Если нет, оставить поле пустым.
- если для работы достаточно прерываемой машинки, то поставить preemptible = true


4. В командной строке перейти в папку vm_in_existing_network и выполнить команды:
```
terraform init
terraform plan
terraform apply
```

5. terraform apply вернет ip адрес созданной ВМ. К ней можно будет подключиться по ssh:
```
ssh -i  "/путь/до/приватного/ключа/ssh_keys/ssh_key" <username>@<external_ip_address>
```

6. Удалить все созданные ресурсы:
```
terraform destroy
```